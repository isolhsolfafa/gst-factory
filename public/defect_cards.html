
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🏭 PDA 불량 분석 대시보드</title>
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
                 body {
             font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, Roboto, sans-serif;
             background: #f8f9fa;
             min-height: 100vh;
             color: #2d3748;
         }
        
        
        
                 .container {
             max-width: 1400px;
             margin: 0 auto;
             padding: 20px;
         }
        
                 .section {
             background: white;
             border-radius: 10px;
             padding: 20px;
             margin-bottom: 20px;
             box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
             border: 1px solid #e2e8f0;
         }
        
        .section h2 {
            font-size: 1.8rem;
            font-weight: 600;
            margin-bottom: 20px;
            color: #2d3748;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
                 .card-container {
             display: grid;
             grid-template-columns: 1fr 1fr;
             gap: 20px;
             padding: 0;
             width: 100%;
         }
        
        
        
                          .defect-card {
             background: white;
             border-radius: 8px;
             padding: 16px;
             box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
             transition: all 0.3s ease;
             border: 1px solid #e2e8f0;
             position: relative;
             overflow: hidden;
             min-width: 0;
             width: 100%;
         }
        
        .defect-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
        }
        
        .defect-card h3 {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 15px;
            color: #2d3748;
        }
        
        .defect-info {
            margin-bottom: 15px;
        }
        
                 .defect-info p {
             margin: 8px 0;
             font-size: 14px;
             color: #4a5568 !important;
             display: flex;
             justify-content: space-between;
             align-items: center;
         }
         
         .defect-count {
             font-weight: 700 !important;
             color: #e53e3e !important;
             font-size: 1.1rem !important;
         }
         
         .defect-categories {
             color: #4299e1 !important;
             font-weight: 500 !important;
         }
        
                 .detail-btn {
             display: inline-flex;
             align-items: center;
             gap: 8px;
             background: #007bff;
             color: white;
             padding: 8px 16px;
             border-radius: 6px;
             text-decoration: none;
             font-weight: 500;
             font-size: 14px;
             transition: all 0.3s ease;
             border: none;
             cursor: pointer;
         }
         
         .detail-btn:hover {
             background: #0056b3;
             transform: translateY(-1px);
         }
        
        .chart-container {
            position: relative;
            height: 500px;
            margin: 20px 0;
        }
        
        .detail-box {
            display: none;
            margin: 20px 0;
            padding: 20px;
            background: #f7fafc;
            border-radius: 15px;
            border-left: 4px solid #4299e1;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .detail-box::-webkit-scrollbar {
            width: 6px;
        }
        
        .detail-box::-webkit-scrollbar-thumb {
            background: #cbd5e0;
            border-radius: 3px;
        }
        
        .detail-row {
            margin: 8px 0;
            font-size: 14px;
            line-height: 1.5;
        }
        
        .product-title {
            margin: 15px 0 8px 0;
            font-weight: 600;
            font-size: 15px;
            color: #2d3748;
            padding: 8px 12px;
            background: white;
            border-radius: 8px;
            border-left: 3px solid #4299e1;
        }
        
        .pagination {
            margin-top: 15px;
            text-align: center;
        }
        
        .pagination button {
            background: #4299e1;
            color: white;
            border: none;
            padding: 8px 16px;
            margin: 0 5px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.3s ease;
        }
        
        .pagination button:hover {
            background: #3182ce;
        }
        
                 @media (max-width: 768px) {
             .container {
                 padding: 15px;
             }
             
             .card-container {
                 grid-template-columns: 1fr;
                 gap: 15px;
             }
             
             .section {
                 padding: 20px;
             }
         }
         
         @media (max-width: 1024px) and (min-width: 769px) {
             .card-container {
                 grid-template-columns: repeat(2, 1fr);
                 gap: 15px;
             }
         }
        </style>
</head>
<body>

    
    <div class="container">
        <!-- 카드 뷰 섹션 -->
        <div class="section">
            <h2>📋 제품별 불량 현황</h2>
            <div class="card-container">
                
            <div class="defect-card">
                <h3>🏭 DRAGON AB DUAL</h3>
                <div class="defect-info">
                    <p>총 불량: <span class="defect-count">2건</span></p>
                    <p>주요 분류: <span class="defect-categories">기구작업불량</span></p>
                </div>
                <button class="detail-btn" onclick="scrollToChart()">
                    📊 상세 분석 보기
                </button>
            </div>
            
            <div class="defect-card">
                <h3>🏭 DRAGON LE DUAL</h3>
                <div class="defect-info">
                    <p>총 불량: <span class="defect-count">1건</span></p>
                    <p>주요 분류: <span class="defect-categories">기구작업불량</span></p>
                </div>
                <button class="detail-btn" onclick="scrollToChart()">
                    📊 상세 분석 보기
                </button>
            </div>
            
            <div class="defect-card">
                <h3>🏭 GAIA-I</h3>
                <div class="defect-info">
                    <p>총 불량: <span class="defect-count">41건</span></p>
                    <p>주요 분류: <span class="defect-categories">기구작업불량, 부품불량, 설계불량</span></p>
                </div>
                <button class="detail-btn" onclick="scrollToChart()">
                    📊 상세 분석 보기
                </button>
            </div>
            
            <div class="defect-card">
                <h3>🏭 GAIA-I DUAL</h3>
                <div class="defect-info">
                    <p>총 불량: <span class="defect-count">73건</span></p>
                    <p>주요 분류: <span class="defect-categories">기구작업불량, 전장작업불량, 부품불량</span></p>
                </div>
                <button class="detail-btn" onclick="scrollToChart()">
                    📊 상세 분석 보기
                </button>
            </div>
            
            <div class="defect-card">
                <h3>🏭 GAIA-II</h3>
                <div class="defect-info">
                    <p>총 불량: <span class="defect-count">21건</span></p>
                    <p>주요 분류: <span class="defect-categories">기구작업불량, 전장작업불량, 설계불량</span></p>
                </div>
                <button class="detail-btn" onclick="scrollToChart()">
                    📊 상세 분석 보기
                </button>
            </div>
            
            <div class="defect-card">
                <h3>🏭 GAIA-II DUAL</h3>
                <div class="defect-info">
                    <p>총 불량: <span class="defect-count">15건</span></p>
                    <p>주요 분류: <span class="defect-categories">기구작업불량, 부품불량, 설계불량</span></p>
                </div>
                <button class="detail-btn" onclick="scrollToChart()">
                    📊 상세 분석 보기
                </button>
            </div>
            
            <div class="defect-card">
                <h3>🏭 GAIA-I_NEXCHIP</h3>
                <div class="defect-info">
                    <p>총 불량: <span class="defect-count">1건</span></p>
                    <p>주요 분류: <span class="defect-categories">기구작업불량</span></p>
                </div>
                <button class="detail-btn" onclick="scrollToChart()">
                    📊 상세 분석 보기
                </button>
            </div>
            
            <div class="defect-card">
                <h3>🏭 GAIA-P</h3>
                <div class="defect-info">
                    <p>총 불량: <span class="defect-count">20건</span></p>
                    <p>주요 분류: <span class="defect-categories">기구작업불량, 부품불량, 설계불량</span></p>
                </div>
                <button class="detail-btn" onclick="scrollToChart()">
                    📊 상세 분석 보기
                </button>
            </div>
            
            <div class="defect-card">
                <h3>🏭 GAIA-P DUAL</h3>
                <div class="defect-info">
                    <p>총 불량: <span class="defect-count">4건</span></p>
                    <p>주요 분류: <span class="defect-categories">전장작업불량, 기구작업불량</span></p>
                </div>
                <button class="detail-btn" onclick="scrollToChart()">
                    📊 상세 분석 보기
                </button>
            </div>
            
            <div class="defect-card">
                <h3>🏭 IVAS</h3>
                <div class="defect-info">
                    <p>총 불량: <span class="defect-count">3건</span></p>
                    <p>주요 분류: <span class="defect-categories">부품불량, 기구작업불량</span></p>
                </div>
                <button class="detail-btn" onclick="scrollToChart()">
                    📊 상세 분석 보기
                </button>
            </div>
            
            <div class="defect-card">
                <h3>🏭 SWS-I</h3>
                <div class="defect-info">
                    <p>총 불량: <span class="defect-count">3건</span></p>
                    <p>주요 분류: <span class="defect-categories">부품불량, 설계불량</span></p>
                </div>
                <button class="detail-btn" onclick="scrollToChart()">
                    📊 상세 분석 보기
                </button>
            </div>
            
            <div class="defect-card">
                <h3>🏭 WET 1000</h3>
                <div class="defect-info">
                    <p>총 불량: <span class="defect-count">2건</span></p>
                    <p>주요 분류: <span class="defect-categories">부품불량, 기구작업불량</span></p>
                </div>
                <button class="detail-btn" onclick="scrollToChart()">
                    📊 상세 분석 보기
                </button>
            </div>
            
            </div>
        </div>
        
        <!-- 차트 섹션 -->
        <div class="section" id="chartSection">
            <h2>📊 대분류/중분류별 상세 분석 <small style="color: #718096;">(클릭하여 상세 정보 확인)</small></h2>
            <div class="chart-container">
                <canvas id="barChart"></canvas>
            </div>
            <div id="detailsArea"></div>
        </div>
    </div>

    <!-- 데이터 스크립트 -->
    <script id="bar-data" type="application/json">[{"bar_key": "기구작업불량 / Leak", "count": 56, "losstime": 701.0}, {"bar_key": "기구작업불량 / 눈관리", "count": 25, "losstime": 109.0}, {"bar_key": "기구작업불량 / 부품누락", "count": 3, "losstime": 28.0}, {"bar_key": "기구작업불량 / 사양불일치", "count": 1, "losstime": 7.0}, {"bar_key": "기구작업불량 / 오조립", "count": 15, "losstime": 676.0}, {"bar_key": "기구작업불량 / 작업누락", "count": 12, "losstime": 49.0}, {"bar_key": "부품불량 / Leak", "count": 22, "losstime": 328.0}, {"bar_key": "부품불량 / 기구부품", "count": 1, "losstime": 15.0}, {"bar_key": "부품불량 / 동작불량", "count": 5, "losstime": 205.0}, {"bar_key": "부품불량 / 부품누락", "count": 3, "losstime": 8.0}, {"bar_key": "부품불량 / 사양불일치", "count": 1, "losstime": 65.0}, {"bar_key": "부품불량 / 소음", "count": 1, "losstime": 65.0}, {"bar_key": "설계불량 / 설계오류", "count": 10, "losstime": 781.0}, {"bar_key": "작업불량 / 기구작업", "count": 2, "losstime": 10.0}, {"bar_key": "작업불량 / 전장작업", "count": 2, "losstime": 15.0}, {"bar_key": "전장작업불량 / 눈관리", "count": 10, "losstime": 45.0}, {"bar_key": "전장작업불량 / 배선누락", "count": 1, "losstime": 3.0}, {"bar_key": "전장작업불량 / 불완전체결", "count": 7, "losstime": 36.0}, {"bar_key": "전장작업불량 / 오배선", "count": 9, "losstime": 56.0}]</script>
    <script id="details-data" type="application/json">{"기구작업불량 / Leak": {"GAIA-I": [["REDUCING UNION TEE FITTING NUT LEAK", "BCW LINE REDUCING UNION TEE FITTING NUT 좌측상단 LEAK", 6.0], ["MALE ADAPTER FIITNG NUT WATER LEAK", "BCW LINE PNEUMATIC VALVE 체결 MALE ADAPTER NUT부 WATER LEAK", 13.0], ["MALE ELBOW FITTING NUT WATER LEAK (TEFLON부)", "QUENCH LINE WATER MANIFOLD 체결 MALE ELBOW TEFLON부 WATER LEAK", 13.0], ["MALE ELBOW Fitting nut Water Leak (TEFLON부)", "MANIFOLD QUENCH LINE MALE ELBOW FITTING NUT WATER LEAK (TEFLON부)", 13.0], ["UNION TEE FITTING NUT WATER LEAK (NUT부)", "WET LINE UNION TEE 하단 NUT부 WATER LEAK", 4.0], ["LEVEL SENSOR BCW UNION ELBOW Fitting Nut Leak", "LEVEL SENSOR BCW UNION ELBOW IN단 Fitting Nut Leak", 7.0], ["CLAMP 미완체결", "V120 3WAY ACTUATOR VALVE 상단 우측 CLAMP 미완체결 (손풀림)", 3.0], ["BULKHEAD UNION FITTING NUT LEAK", "PCW LINE BULKHEAD UNION IN단 FITTING NUT LEAK", 123.0], ["MALE ELBOW Fitting Water Leak(Teflon부)", "QUENCH Line MANIFOLD Teflon부 water Leak", 7.0], ["MALE ELBOW FITTING NUT WATER LEAK (TEFLON부)", "SWIRL LINE WATER MANIFOLD 체결 MALE ELBOW TEFLON부 WATER LEAK", 13.0], ["MALE ELBOW FITTING NUT WATER LEAK (TEFLON부)", "QUENCH LINE WATER MANIFOLD 체결 MALE ELBOW TEFLON부 WATER LEAK", 12.0], ["MALE ELBOW FITTING NUT WATER LEAK (TEFLON부)", "WET LINE WATER MANIFOLD 체결 MALE ELBOW TEFLON부 WATER LEAK", 12.0], ["MALE ELBOW FITTING NUT WATER LEAK (NUT부)", "WET LINE WATER MANIFOLD 체결 MALE ELBOW NUT부 WATER LEAK", 7.0], ["MALE ELBOW FITTING NUT WATER LEAK (NUT부)", "QUENCH LINE WATER MANIFOLD 체결 MALE ELBOW NUT부 WATER LEAK", 7.0], ["MALE ELBOW FITTING NUT WATER LEAK (TEFLON부)", "SWIRL LINE WATER MANIFOLD 체결 MALE ELBOW TEFLON부 WATER LEAK", 12.0], ["MALE ELBOW FITTING NUT WATER LEAK (NUT부)", "WET LINE WATER MANIFOLD 체결 MALE ELBOW NUT부 WATER LEAK", 5.0], ["MALE ELBOW FITTING NUT WATER LEAK (NUT부)", "QUENCH LINE WATER MANIFOLD 체결 MALE ELBOW NUT부 WATER LEAK", 5.0], ["MALE ELBOW FITTING NUT WATER LEAK (TEFLON부)", "SWIRL LINE WATER MANIFOLD 체결 MALE ELBOW TEFLON부 WATER LEAK", 12.0], ["MALE ELBOW FITTING NUT WATER LEAK (TEFLON부)", "QUENCH LINE WATER MANIFOLD 체결 MALE ELBOW TEFLON부 WATER LEAK", 12.0]], "GAIA-I DUAL": [["MALE ELBOW FITTING NUT WATER LEAK (TEFLON부)", "QUENCH NOZZLE MALE ELBOW TEFLON부 WATER LEAK", 13.0], ["MALE ELBOW Fitting Nut Water Leak (Teflon부)", "RIGHT WET TOWER MALE ELBOW Teflon부 Leak", 7.0], ["DIFFRENT UNION TEE 하단부 LEAK", "DIFFRENT UNION TEE 하단부 Tube 삽입정도부족 Leak", 2.0], ["MALE ELBOW Fitting nut Water Leak (NUT부)", "RIGHT WET TOWER MALE ELBOW NUT부 LEAK", 4.0], ["MALE CONNECTOR Fitting nut Water Leak (Teflon부)", "WET Line MANIFOLD Teflon부 water Leak", 11.0], ["MALE CONNECTOR Fitting nut Water Leak (Teflon부)", "QUENCH Line MANIFOLD Teflon부 water Leak", 11.0], ["MALE CONNECTOR Fitting nut Water Leak (Teflon부)", "QUENCH Line MANIFOLD Teflon부 water Leak", 11.0], ["MALE ELBOW FITTING NUT LEAK (NUT부)", "QEUNCH LINE MALE ELBOW FITTING NUT LEAK (NUT부) / 1바퀴 추가체결", 4.0], ["UNION ELBOW FITTING NUT LEAK (NUT부)", "N.V140PA UNION ELBOW PFA TUBE 체결부 LEAK", 13.0], ["MALE CONNECTOR FITTING NUT LEAK (NUT부)", "SUS MALE CONNECTOR PFA TUBE 체결부 LEAK", 13.0], ["UNION ELBOW FITTING NUT LEAK", "PAB PE120A UNION ELBOW 체결강도 부족으로 인한 LEAK 1/4 바퀴 추가 체결", 4.0], ["MALE BANJO 자체 TEFLON SEALING부 LEAK", "CDA LINE REGULATOR 체결부 MALE BANJO 체결불량", 3.0], ["MALE BANJO 자체 TEFLON SEALING부 LEAK", "CDA LINE REGULATOR 체결부 MALE BANJO 체결불량", 3.0]], "GAIA-II": [["MALE CONNECTOR Fitting nut Water Leak (Teflon부)", "QUENCH Line MANIFOLD Teflon부 water Leak", 13.0], ["MALE CONNECTOR Fitting nut Water Leak (Teflon부)", "WET Line MANIFOLD Teflon부 water Leak", 12.0], ["MALE CONNECTOR Fitting nut Water Leak (Teflon부)", "QUENCH Line MANIFOLD Teflon부 water Leak", 11.0], ["MALE CONNECTOR Fitting nut Water Leak (Teflon부)", "Qeunch Line MANIFOLD Teflon부 water Leak", 12.0], ["HEAT EXCHANGER BCW LINE NUT 체결불량으로 인한 WATER LEAK", "HEAT EXCHANGER BCW HOT OUT부 NUT 체결불량으로 인한 WATER LEAK", 10.0], ["MALE CONNECTOR Fitting nut Water Leak (Teflon부)", "WET Line MANIFOLD Teflon부 water Leak", 12.0], ["MALE CONNECTOR Fitting nut Water Leak (Teflon부)", "Qeunch Line MANIFOLD Teflon부 water Leak", 12.0], ["MALE CONNECTOR Fitting nut Water Leak (Teflon부)", "WET Line MANIFOLD Teflon부 water Leak", 11.0], ["MALE CONNECTOR Fitting nut Water Leak (Teflon부)", "SWIRL Line MANIFOLD Teflon부 water Leak", 12.0], ["MALE CONNECTOR Fitting nut Water Leak (Teflon부)", "Qeunch Line MANIFOLD Teflon부 water Leak", 12.0], ["MALE CONNECTOR Fitting nut Water Leak (Teflon부)", "SWIRL Line MANIFOLD Teflon부 water Leak", 12.0], ["MALE CONNECTOR Fitting nut Water Leak (Teflon부)", "WET Line MANIFOLD Teflon부 water Leak", 12.0], ["REDUCING UNION TEE FITTING NUT LEAK", "CHAMBER REDUCING UNION TEE 우측 상단 FITTING NUT LEAK", 6.0], ["MALE CONNECTOR Fitting nut Water Leak (Teflon부)", "Qeunch Line MANIFOLD Teflon부 water Leak", 12.0], ["MALE CONNECTOR Fitting nut Water Leak (Teflon부)", "WET Line MANIFOLD Teflon부 water Leak", 12.0]], "GAIA-II DUAL": [["ADJUSTABLE ELBOW Fitting Nut 미체결", "PCW-S 열교환기 IN단 ADJUSTABLE ELBOW Fitting Nut 미체결", 4.0], ["UNION TEE Fitting Nut 미완체결", "BCW UNION TEE 하단부 Fitting Nut 미완체결", 4.0], ["ADJUTABLE ELBOW Fitting Nut 미체결", "PCW-S 열교환기 IN단 연결 ADJUTABLE ELBOW Fitting Nut 미체결", 4.0], ["MALE ELBOW FITTING NUT WATER LEAK (NUT부)", "RIGHT QUENCH NOZZLE MALE ELBOW NUT부 LEAK", 4.0], ["MALE CONNECTOR FITTING NUT LEAK (NUT부)", "EXHAUST PU 체결 MALE CONNECTOR NUT부 LEAK(과체결로 인한 파손)", 18.0], ["UNION ELBOW FITTIN NUT WATER LEAK", "UNION ELBOW FITTING NUT IN단 LEAK", 13.0]], "GAIA-P": [["MALE CONNECTOR Fitting nut Water Leak (Teflon부)", "VENTURY LINE FLOW SENSOR CONNECTOR 체결 TEFLON부 Water Leak", 13.0], ["MALE ELBOW Fitting Nut Water Leak (Teflon부)", "C.WIR Line MALE ELBOW Teflon부 Water Leak", 15.0]], "WET 1000": [["Flange Leak 발생", "", 70.0]]}, "기구작업불량 / 눈관리": {"GAIA-I": [["KEY OPERATION VALVE KEY 누락", "PCW, BCW LINE KEY OPERATION VALVE KEY 누락", 4.0], ["REGULATOR IN,OUT 스티커 누락", "CDA LINE REGULATOR IN,OUT 스티커 누락", 4.0], ["KEY OPERATION VALVE KEY 누락", "PCW, BCW LINE KEY OPERATION VALVE KEY 누락", 4.0], ["DRAIN LINE CABINET 고정볼트 I-Marking 누락", "DRAIN LINE CABINET 고정볼트", 2.0], ["HEAT EXCHANGER 스티커 오부착", "HEAT EXCHANGER PCW COLD IN, OUT 스티커 교차부착", 3.0], ["HEAT EXCHANGER 스티커 오부착", "HEAT EXCHANGER PCW COLD IN, OUT 스티커 교차부착", 3.0]], "GAIA-I DUAL": [["RIGHT QUENCH NOZZLE MALE ELBOW I-Marking 누락", "MALE ELBOW I-Marking 누락", 2.0], ["HEAT EXCHANGER COVER I-MARKING 누락", "RIGHT PCW 미니 열교환기 고정 볼트 I-MARKING 누락", 2.0], ["HEAT EXCHANGER COVER I-MARKING 누락", "LEFT PCW 미니 열교환기 고정 볼트 I-MARKING 누락", 2.0], ["125A CLAMP I-Marking 누락", "125A CLMAP 체결 후 I-Marking 누락", 2.0], ["125A CLAMP I-MARKING 누락", "WET TOWER ELBOW EXHASUT 체결 125A CLAMP I-MARKING 누락", 2.0], ["CLAW CLAMP I-MARKING 누락 (5건)", "RIGHT BURNER PLATE 고정 CLAW CLAMP 스프링와셔 I-MARKING 누락 (5건)", 11.0], ["CLAW CLAMP I-MARKING 누락 (5건)", "LEFT BURNER PLATE 고정 CLAW CLAMP 스프링와셔 I-MARKING 누락 (5건)", 11.0], ["CLAW CLAMP I-MARKING 틀어짐", "BURNER PLATE 체결 CLAW CLAMP I-MARKING 틀어짐", 2.0], ["PCW-S(L), PCW-R(L) 방향 스티커 누락", "PCW LINE 버너부 방향스티커 누락", 7.0], ["이류체 체결 TUBE 방향 스티커 누락", "BCW 2건, CDA 1건 L,R 총 6건 누락", 7.0], ["DRAIN LINE CABINET 고정볼트 I-MARKING 누락", "DRAIN LINE CABINET 고정볼트 I-MARKING 누락", 2.0]], "GAIA-II DUAL": [["TANK LEVEL RANGE 안내 스티커 부착 누락", "TANK LEVEL RANGE 안내 스티커 부착 누락", 5.0], ["SUS TUBE 클리닝 미진행", "SUS TUBE 클리닝 미진행", 2.0], ["CDA 방향스티커 훼손", "CDA LINE 방향 스티커 훼손으로 인한 교체", 5.0]], "GAIA-I_NEXCHIP": [["PNEUMATIC VALVE IN 스티커 누락", "BCW LINE V520 PNEUMATIC VALVE IN스티커 누락", 4.0]], "GAIA-P": [["PCW LINE BALL VALVE MEDAL 오장착", "정상 : NORMAL CLOSE / 실물 : NORMAL OPEN", 6.0], ["KEY OPERATION VALVE KEY 누락", "PCW, BCW LINE KEY OPERATION VALVE KEY 누락", 7.0], ["KEY OPERATION VALVE KEY 누락", "PCW, BCW LINE KEY OPERATION VALVE KEY 누락", 7.0]], "GAIA-P DUAL": [["REGULATOR 고정 볼트 I-MARKING 누락", "PCV401 REGULATOR CAIBNET 고정 볼트 I-MARKING 누락", 3.0]]}, "기구작업불량 / 부품누락": {"GAIA-I": [["PLUG 장착누락", "다연조 솔레노이드 밸브 미사용 PORT에 PLUG 미장착", 4.0], ["PLUG 장착누락", "다연조 솔레노이드 밸브 미사용 PORT에 PLUG 미장착", 4.0]], "GAIA-I DUAL": [["O-Ring 누락", "Exhaust Drain Socket 체결부 O-Ring 누락", 20.0]]}, "기구작업불량 / 사양불일치": {"GAIA-P DUAL": [["CABINET 고정 볼트 삽입부족", "DRAIN LINE CABINET 고정볼트 돌출길이 부족", 7.0]]}, "기구작업불량 / 오조립": {"DRAGON LE DUAL": [["COOLING BODY 고정볼트 미완체결", "LEFT CHAMBER COOLING BODY CABINET 고정 볼트 미완체결 (와샤압착X)", 4.0]], "GAIA-I": [["WET TANK 고정 볼트 미완체결", "WET TANK 고정 볼트 미완체결", 6.0], ["Port Bend Heater 단선 확인, Cable 눌림(Clamp 단, 씹힘))", "", 600.0]], "GAIA-I DUAL": [["REACTOR CABINET 고정볼트 미완체결", "REACTOR 고정볼트 미완체결로 인한 I-MARKING 틀어짐", 4.0], ["CLAW CLAMP 미완체결", "리액터 CLAW CLAMP 미완체결 (손흔들림)", 2.0], ["SOLENOID VALVE 커넥터 교차 연결", "N2 LINE SV400 ↔ SV421 커넥터 교차연결", 2.0], ["SOLENOID VALVE 커넥터 방향 오류", "N2 LINE SV421 SOLENOID VALVE 오조립으로 인한 커넥터 체결불가", 6.0], ["SOLENOID VALVE 커넥터 방향 오류", "N2 LINE SV400 SOLENOID VALVE 오조립으로 인한 커넥터 체결불가", 6.0], ["DILUTION N2 VALVE YMTC向 N/C → N/O TYPE 미적용", "CDA LINE 다연조 SOLENOID VALVE (SV401A)", 2.0], ["SPEED CONTROLLER 역방향 조립", "N.V120BA SPEED CONTROLLER 역방향 조립", 2.0]], "GAIA-II": [["Speed Controller Leak (PFA)", "N14 PFA 삽입부 TUBE 컷팅불량", 2.0], ["Speed Controller Leak (우레탄)", "N34 IN단 SPEED CONTROLLER 우레탄 TUBE 체결불량", 2.0]], "GAIA-P": [["Speed Controller 역방향 조립", "N.V140B 역방향 조립", 2.0], ["EXHAUST PRESSURE SWITCH TUBE 오조립", "EXHAUST PRESSURE SWITCH TUBE 오조립 [정상(음압) 실물(양압)]", 18.0], ["EXHAUST PRESSURE SWITCH TUBE 오조립", "EXHAUST PRESSURE SWITCH TUBE 오조립 [정상(음압) 실물(양압)]", 18.0]]}, "기구작업불량 / 작업누락": {"DRAGON AB DUAL": [["ADJUSTABLE ELBOW FITTING NUT 미완체결", "PCW-S(L) ADJUSTABLE ELBOW FITTING NUT OUT단 미완체결", 3.0], ["ADJUSTABLE ELBOW FITTING NUT 미완체결", "PCW-S(R) ADJUSTABLE ELBOW FITTING NUT OUT단 미완체결", 3.0]], "GAIA-I": [["ADJUSTABLE ELBOW FITTING NUT 미완체결", "BURNER CDA LINE ADJUSTABLE ELBOW IN단 NUT 미완체결", 6.0]], "GAIA-I DUAL": [["MALE CONNECTOR FITTING NUT LEAK (미완쳬결)", "PCW LINE MALE CONNECTOR OUT단 NUT 미완체결로 인한 LEAK", 3.0], ["Speed Controller Leak (PFA)", "N.V140BA OUT단 PFA삽입부 LEAK", 4.0], ["UNION ELBOW FITTING NUT LEAK (미완쳬결)", "PE140 UNION ELBOW IN단 NUT 미완체결로인한 LEAK", 6.0], ["BULKHEAD UNION NUT부 미완체결 NUT", "LNG LINE BULKHEAD UNION NUT부 미완체결", 2.0], ["REDUCING UNION TEE FITTING NUT 미체결 LEAK", "PCW-R(R) UNION TEE 하단부 FITTING NUT 미체결 (손풀림)", 3.0], ["UNION TEE FITTING NUT LEAK (미완체결)", "CDA LINE MFC 체결 UNION TEE 하단 FITTING NUT 미완체결", 3.0], ["PUMP NUT 미완체결로 인한 LEAK", "DRAIN LINE PUMP NUT 미완체결로 인한 LEAK", 4.0]], "GAIA-II DUAL": [["FEMALE BRANCH TEE FITTING NUT LEAK(손풀림)", "PD700A FEMALE BRANCH TEE FITTING NUT 우측상단 LEAK (미완체결)", 2.0]], "IVAS": [["Jacket Cable Ch10 체결 누락으로 ErS 발생", "IVAS GAIA D Pump Rack#4 Jacket Controller#2", 10.0]]}, "부품불량 / Leak": {"GAIA-I": [["Speed Controller Leak (PFA)", "N34 PFA 삽입부 OUT단 LEAK", 5.0], ["Speed Controller Leak (BODY)", "N3 SPEEDCONTROLLER BODY와 AIR MANIFOLD 체결부 사이 LEAK", 18.0], ["Speed Controller Leak (PFA)", "N.V140P OUT단 PFA 삽입부 Leak", 4.0], ["SpeedCotroller Leak (PFA)", "N.V120B Out단 SPEEDCONTROLLER PFA Tube 체결부 Leak", 2.0], ["Screw Scraper Body Leak", "", 70.0], ["Speed Controller Leak (우레탄)", "N.SCR-150 IN단 SPEED CONTROLLER 우레탄 TUBE삽입부 LEAK", 6.0], ["Speed Controller Leak (PFA)", "N31 OUT단 PFA TUBE 삽입부 LEAK", 5.0]], "GAIA-I DUAL": [["Speed Controller Leak (우레탄)", "N.PE700A IN단 우레탄 삽입부 Leak / 내부 고정핀 이탙", 4.0], ["Spark Rod Nipple 체결부 Leak", "", 13.0], ["Speed Controller Leak (PFA)", "N.V120BA OUT단 PFA 삽입부 Leak", 4.0], ["Speed Controller Leak (PFA)", "N.V130PA OUT단 PFA 삽입부 Leak", 4.0], ["SPEED CONTROLLER LEAK (BODY)", "N.V120BA SPEED CONTROLLER BODY LEAK", 2.0]], "GAIA-II DUAL": [["Speed Controller Leak (PFA)", "N10 OUT단 PFA삽입부 LEAK", 2.0], ["Speed Controller Leak (PFA)", "N4 OUT단 PFA 삽입부 Leak", 4.0], ["Speed Controller Leak (PFA)", "N1A OUT단 PFA TUBE 삽입부 LEAK", 5.0]], "GAIA-P": [["Speed Controller Leak (PFA)", "N.PE140 OUT단 PFA삽입부 LEAK", 3.0], ["PCW (S) Port Leak", "", 10.0], ["Speed Controller Leak (PFA)", "N.V110B OUT단 PFA삽입부 LEAK", 3.0], ["Speed Controller Leak (PFA)", "N.SCR-130 OUT단 PFA 삽입부 Leak", 7.0]], "SWS-I": [["REDUCER DOUBLE Y UNION LEAK (우레탄)", "REDUCER DOUBLE Y UNION (4) Leak/내부 Packing 씹힘", 4.0], ["UNION Y Body Crack Leak", "UNION Y Body Crack Leak", 3.0]], "WET 1000": [["Quench Port 부 Leak", "", 150.0]]}, "부품불량 / 기구부품": {"GAIA-I": [["도장 벗겨짐", "도색하여 조치 완료", 15.0]]}, "부품불량 / 동작불량": {"GAIA-I DUAL": [["Error 발생 시 Buzzer X", "H/J Controller", 25.0], ["경광등 Buzzer 소리 상이", "", 65.0], ["접점 불량으로 인한 Alarm 발생", "Cablnet Pressure Switch", 15.0], ["Cable 찍힘으로 Short 발생", "", 70.0], ["모터 코일 2번&lt;-&gt;모터 프레임 쇼트로 인한 ELCB 트립 현상", "모터 코일 2번&lt;-&gt;모터 프레임 쇼트", 30.0]]}, "부품불량 / 부품누락": {"GAIA-P": [["Speed Controller Leak (PFA)", "N.V120B OUT단 PFA삽입부 LEAK", 3.0], ["Speed Controller Leak (PFA)", "N.PE140 OUT단 PFA삽입부 LEAK", 3.0], ["Speed Controller Leak (PFA)", "N.V130B OUT단 PFA삽입부 LEAK", 2.0]]}, "부품불량 / 사양불일치": {"IVAS": [["Heating Jacket Cable 방수캡 Size 불량으로 Cable Connector 체결 불가", "", 65.0]]}, "부품불량 / 소음": {"IVAS": [["내부 Bolt 존재하여 소음 발생", "", 65.0]]}, "설계불량 / 설계오류": {"GAIA-I": [["CDA Line 다연조 Sol Valve 적용 오류(정상: 4port / 오류: 2port)", "", 98.0]], "GAIA-I DUAL": [["Terminal Block Jumper BOM 수량 오류(정상: 6EA / 오류: 3EA)", "", 5.0], ["N2 Inlet Purge 플로우 센서 표기가 기구 조립도, P&ID, 전장 도면 상이", "제조품질검사", 34.0]], "GAIA-II": [["WASTE GAS LINE(31101743) 중 CHECK VALVE(11101368/10mm) 표시 부분 P&ID 누락", "", 310.0]], "GAIA-II DUAL": [["WASTE GAS LINE CHECK VALVE(11101368/10mm) 표시 부분 CV402, 404 오표기", "", 22.0]], "GAIA-P": [["AC Panel 부 와 Front 부 실 장착 간 혼동 발생", "C&A 전장조립공정", 28.0], ["Noise Filter BOM 누락", "", 206.0], ["P&ID 內 FE500 Tag중복 표기", "BAT 조립 공정", 22.0], ["Nord Lock Clamp 수량 1EA 부족", "BAT 조립 공정", 23.0]], "SWS-I": [["P&ID상 W.600이 연결되지 않는 포인트로 확인", "", 33.0]]}, "작업불량 / 기구작업": {"GAIA-I": [["Door Stay Sticker 부착 누락", "작업자 부착", 5.0]], "GAIA-II DUAL": [["다연조 Sol Valve Push Botton Cover 파손", "대체품 교체", 5.0]]}, "작업불량 / 전장작업": {"GAIA-I DUAL": [["PAB Sensor 고정 볼트 I-Marking 누락 전 Point", "재작업", 10.0], ["Connector Numberling 오부착(정상 : PMP600 / 실물 : PMP600A)", "Numberling 재작업", 5.0]]}, "전장작업불량 / 눈관리": {"GAIA-I DUAL": [["수축 넘버링 튜브 누락", "LEFT CHAMBER SCRAPER POSITION SENSOR 수축 TUBE 누락", 11.0], ["FLOW SENSOR 넘버링 튜브 누락 (L,R)", "PCW LINE FLOW SENSOR 넘버링 튜브 누락 (FE960,FE960A)", 6.0], ["FLOW SENSOR 넘버링 튜브 누락 (L,R)", "PCW LINE FLOW SENSOR 넘버링 튜브 누락 (FE950,FE950A)", 6.0], ["FLOW SENSOR 넘버링 튜브 누락 (L,R)", "BCW LINE FLOW SENSOR 넘버링 튜브 누락 (FE500,FE500A)", 6.0], ["MCCB OK 스티커 누락", "MCCB 좌측 검사확인 OK 스티커 누락", 4.0]], "GAIA-II": [["TEMP SWITCH I-MARKING 누락", "REACTOR TEMP SWITCH I-MARKING 누락", 2.0], ["CABINET 접지 스티커 누락", "DOOR ↔ CABINET 접지스티커 누락", 2.0], ["CABINET 접지 스티커 누락", "DOOR ↔ CABINET 접지스티커 누락", 2.0]], "GAIA-P DUAL": [["GROUND BAR 볼트 I-MARKING 누락", "GROUND BAR 볼트 I-MARKING 누락", 2.0], ["SWAP CONNECTOR BRACKET I-MARKING 누락", "SWAP CONNECTOR BRACKET I-MARKING 누락", 4.0]]}, "전장작업불량 / 배선누락": {"GAIA-I DUAL": [["TBDR30A:2/11 배선 누락", "TERMINAL BLOCK TBDR30A:2/11 배선 누락", 3.0]]}, "전장작업불량 / 불완전체결": {"GAIA-I": [["LEVEL SENSOR P.P NUT LEAK (손풀림)", "LEVEL SENSOR P.P NUT 체결불량으로 인한 LEAK", 4.0]], "GAIA-I DUAL": [["DRAIN TEMP SENSOR 체결부 MALE CONNECTOR 미완체결 (손풀림)", "L,R DRAIN TEMP SENSOR 체결부 MALE CONNECTOR 미완체결 (Ferrule안물림, I-MARKING 누락)", 6.0], ["TANK TEMP SENSOR 체결부 MALE CONNECTOR 미완체결 (손풀림)", "L,R TANK TEMP SENSOR 체결부 MALE CONNECTOR 미완체결 (손풀림)", 6.0], ["EXHAUST TEMP SENSOR 체결부 MALE CONNECTOR 미완체결 (손풀림)", "L,R EXHAUST TEMP SENSOR 체결부 MALE CONNECTOR 미완체결 (Ferrule안물림, I-MARKING 누락)", 6.0], ["FLOW SENSOR CONNECTOR 미체결", "LEFT BCW LINE FLOW SENSOR CONNECTOR 미체결 (FE500)", 4.0], ["FLOW SENSOR CONNECTOR 미체결", "RIGHT BCW LINE FLOW SENSOR CONNECTOR 미체결 (FE500A)", 4.0], ["LEVEL SENSOR P.P NUT LEAK (손풀림X)", "LEVEL SENSOR P.P NUT 체결불량으로 인한 LEAK", 6.0]]}, "전장작업불량 / 오배선": {"GAIA-I DUAL": [["TBD20A.P :2/11 오배선", "정상 : TBD20A.P: 2/11 삽입 실물 : TBD20A.P: 1/11 삽입", 2.0], ["CNM300A Right H/J Comunication 오배선", "정상 : 3, 4 / 실물 : 4, 5", 2.0], ["FAN1A ↔ FAN2A 교차배선", "FAN1A ↔ FAN2A 교차배선", 4.0], ["KR5A FAN#2 오배선 (FAN#2 FLOW OFF)", "정상 : KR5A:9 24V인가 실물 : KR5A:9 미배선", 6.0], ["KR5 FAN#1 오배선 (FAN#1 FLOW OFF)", "정상 : KR5:10 24V인가 실물 : KR5:10 미배선", 6.0], ["LEVEL SENSOR 오배선 (LS600)", "정상 : 빨-빨, 파-파, 초-초 실물 : 빨-초, 파-파, 초-빨", 6.0], ["LEVEL SENSOR 오배선 (LS600)", "정상 : 검-검, 노-노, 흰-흰 실물 : 검-흰, 노-노, 흰-검", 6.0], ["Terminal Board 오배선", "정상 : TBDI2/3:1/11 실물 : TBDI2/3:1/12위치에 배선", 4.0]], "GAIA-P": [["MFC to Analog Module 연결단 배선 Numbering은 맞으나 실물이 오배선 이었음(정상 V:노랑, G: 초록)", "Analog Module", 20.0]]}}</script>

    <script>
        // 스크롤 함수
        function scrollToChart() {
            document.getElementById('chartSection').scrollIntoView({
                behavior: 'smooth'
            });
        }

        document.addEventListener('DOMContentLoaded', () => {
            // Chart.js 로드 확인
            if (typeof Chart === 'undefined') {
                document.getElementById('detailsArea').innerHTML = 
                    '<div class="detail-box" style="display: block;">❌ Chart.js 로드 실패</div>';
                return;
            }

            // JSON 데이터 읽기
            const barData = JSON.parse(document.getElementById('bar-data').textContent);
            const detailsDict = JSON.parse(document.getElementById('details-data').textContent);

            const labels = barData.map(r => r['bar_key']);
            const counts = barData.map(r => r['count']);

            // Canvas 확인
            const ctx = document.getElementById('barChart').getContext('2d');
            if (!ctx) {
                document.getElementById('detailsArea').innerHTML = 
                    '<div class="detail-box" style="display: block;">❌ 차트 렌더링 실패</div>';
                return;
            }

            // 차트 초기화
            const myChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: '불량 건수',
                        data: counts,
                        backgroundColor: 'rgba(102, 126, 234, 0.8)',
                        borderColor: 'rgba(102, 126, 234, 1)',
                        borderWidth: 1,
                        borderRadius: 8,
                        borderSkipped: false,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    onClick: (evt, el) => {
                        if (el.length > 0) {
                            const idx = el[0].index;
                            const key = labels[idx];
                            showDetail(key, labels[idx]);
                        }
                    },
                    plugins: {
                        legend: { 
                            display: false 
                        },
                        tooltip: {
                            backgroundColor: 'rgba(0, 0, 0, 0.8)',
                            titleColor: 'white',
                            bodyColor: 'white',
                            cornerRadius: 8,
                            callbacks: {
                                label: function(context) {
                                    const idx = context.dataIndex;
                                    const count = context.raw;
                                    const losstime = barData[idx].losstime;
                                    let tooltip = `불량 건수: ${count}건`;
                                    if (losstime > 0) {
                                        tooltip += `\nLoss Time: ${losstime}분`;
                                    }
                                    return tooltip;
                                }
                            }
                        }
                    },
                    scales: {
                        x: { 
                            ticks: { 
                                autoSkip: false, 
                                maxRotation: 45, 
                                minRotation: 0,
                                font: { 
                                    size: 11,
                                    family: 'Pretendard'
                                },
                                color: '#4a5568'
                            },
                            grid: {
                                display: false
                            }
                        },
                        y: {
                            beginAtZero: true,
                            ticks: {
                                font: {
                                    size: 11,
                                    family: 'Pretendard'
                                },
                                color: '#4a5568'
                            },
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)'
                            }
                        }
                    }
                }
            });

            function showDetail(key, label, page = 1, perPage = 10) {
                const area = document.getElementById('detailsArea');
                if (!(key in detailsDict)) {
                    area.innerHTML = `<div class="detail-box" style="display: block;">❌ 데이터가 없습니다: ${label}</div>`;
                    return;
                }

                const prodMap = detailsDict[key];
                let prodKeys = Object.keys(prodMap);
                const start = (page - 1) * perPage;
                const end = start + perPage;
                
                let html = `<div class="detail-box"><strong>📋 상세 정보: ${label}</strong><br><br>`;
                
                prodKeys.slice(start, end).forEach(prod => {
                    html += `<div class="product-title">🔹 ${prod}</div>`;
                    const plist = prodMap[prod];
                    if (plist.length === 0) {
                        html += '<div class="detail-row">데이터 없음</div>';
                    } else {
                        plist.forEach(row => {
                            let detail = `▪️ ${row[0]} / <span style="color:#666;">${row[1]}</span>`;
                            if (row[2] > 0) {
                                detail += ` / <span style="color:#e53e3e; font-weight: 600;">${row[2]}분</span>`;
                            }
                            html += `<div class="detail-row">${detail}</div>`;
                        });
                    }
                });

                if (prodKeys.length > perPage) {
                    html += `<div class="pagination">`;
                    if (page > 1) {
                        html += `<button onclick="showDetail('${key}', '${label}', ${page - 1})">← 이전</button>`;
                    }
                    html += `<span style="margin: 0 10px; color: #666;">페이지 ${page} / ${Math.ceil(prodKeys.length / perPage)}</span>`;
                    if (end < prodKeys.length) {
                        html += `<button onclick="showDetail('${key}', '${label}', ${page + 1})">다음 →</button>`;
                    }
                    html += `</div>`;
                }
                
                html += '</div>';
                area.innerHTML = html;
                document.querySelector('.detail-box').style.display = "block";
                
                // 상세 정보로 스크롤
                document.querySelector('.detail-box').scrollIntoView({
                    behavior: 'smooth'
                });
            }

            // 전역 함수로 등록
            window.showDetail = showDetail;
        });
    </script>
</body>
</html>
        